log_facility=daemon
pid_file=/var/run/nrpe/nrpe.pid
server_port=5666
server_address=127.0.0.1
nrpe_user=nagios
nrpe_group=nagios
allowed_hosts=127.0.0.1, <%= @nagios_worker_ip %>
dont_blame_nrpe=1
allow_bash_command_substitution=0
debug=0
command_timeout=60
connection_timeout=300

# Chequeos generales
command[check_nrpe]=/usr/lib64/nagios/plugins/check_nrpe -H localhost
command[check_alive]=/usr/lib64/nagios/plugins/check_port -p 5666 -h localhost
command[check_users]=/usr/lib64/nagios/plugins/check_users -w 5 -c 10
command[check_load]=/usr/lib64/nagios/plugins/check_load -w 15,10,5 -c 30,25,20
command[check_zombie_procs]=/usr/lib64/nagios/plugins/check_procs -w 5 -c 10 -s Z
command[check_total_procs]=/usr/lib64/nagios/plugins/check_procs -w 150 -c 200
command[check_cpu]=/usr/lib64/nagios/plugins/check-cpu -w 85 -c 98
command[check_disk]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -x /dev/shm
command[check_mem]=/usr/lib64/nagios/plugins/check_mem.sh -w 80 -c 95
command[check_ssh]=/usr/lib64/nagios/plugins/check_ssh -p 22 localhost
command[check_swap]=/usr/lib64/nagios/plugins/check_swap -w 20% -c 10%

# Chequeo procesos
command[check_proc_x]=/usr/lib64/nagios/plugins/check_procs -c $ARG1$ -C $ARG2$
command[check_proc_ssh]=/usr/lib64/nagios/plugins/check_procs -c 1:1 --ereg-argument-array="sshd"
command[check_proc_redis]=/usr/lib64/nagios/plugins/check_procs -c 1:1 --ereg-argument-array="redis-server"
command[check_proc_mongo]=/usr/lib64/nagios/plugins/check_procs -c 1:1 --ereg-argument-array="mongod"
command[check_proc_httpd]=/usr/lib64/nagios/plugins/check_procs -c 1:1 --ereg-argument-array="httpd"
command[check_proc_nginx]=/usr/lib64/nagios/plugins/check_procs -c 1:1 --ereg-argument-array="nginx"
command[check_proc_nodejs]=/usr/lib64/nagios/plugins/check_procs -c 1:1 --ereg-argument-array="node"
command[check_proc_rabbit]=/usr/lib64/nagios/plugins/check_procs -c 1:1 --ereg-argument-array="rabbit"

# Chequeo de puertos
command[check_port_x]=/usr/lib64/nagios/plugins/check_port -p $ARG1$ -h localhost
command[check_port_22]=/usr/lib64/nagios/plugins/check_port -p 22 -h localhost
command[check_port_80]=/usr/lib64/nagios/plugins/check_port -p 80 -h localhost
command[check_port_443]=/usr/lib64/nagios/plugins/check_port -p 443 -h localhost
command[check_port_5666]=/usr/lib64/nagios/plugins/check_port -p 5666 -h localhost
command[check_port_5672]=/usr/lib64/nagios/plugins/check_port -p 6379 -h localhost
command[check_port_6379]=/usr/lib64/nagios/plugins/check_port -p 6379 -h localhost
command[check_port_8080]=/usr/lib64/nagios/plugins/check_port -p 8080 -h localhost
command[check_port_27017]=/usr/lib64/nagios/plugins/check_port -p 27017 -h localhost

# Chequeos especiales de MONGO
command[check_mongo_connect]=check_mongodb.py -H localhost -A connect -P 27017 -W 2 -C 4
command[check_mongo_replset]=check_mongodb.py -H localhost -A replset_state -P 27017 -W 0 -C 0
command[check_mongo_memory]=check_mongodb.py -H localhost -A memory -P 27017 -W 20 -C 28
command[check_mongo_databases]=check_mongodb.py -H localhost -A databases -P 27017 -W 300 -C 500
command[check_mongo_collections]=check_mongodb.py -H localhost -A collections -P 27017 -W 300 -C 500
command[check_mongo_queries]=check_mongodb.py -H localhost -A queries_per_second -P 27017 -W 150 -C 200 -q update
command[check_mongo_primary]=check_mongodb.py -H localhost -A connect_primary -P 27017 -W 2 -C 4

