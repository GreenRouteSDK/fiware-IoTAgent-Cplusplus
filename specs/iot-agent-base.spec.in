Name:          @CPACK_PACKAGE_NAME@-base
Version:       @CPACK_PACKAGE_VERSION@
Release:       @CPACK_PACKAGE_RELEASE@
Summary:       IoT - IoTAgent
Group:         PDI-IoT
License:       PDI
BuildArch:     x86_64
BuildRoot:     @CMAKE_CURRENT_BINARY_DIR@/pack/Linux/RPM/%{name}
AutoReqProv:   no
Prefix: /usr/local/iot
#requires:
%define _rpmdir @CMAKE_CURRENT_BINARY_DIR@/pack/Linux/RPM
%define _rpmfilename %{name}-@CPACK_PACKAGE_FILE_NAME@.rpm
%define _unpackaged_files_terminate_build 0
%define _topdir @CMAKE_CURRENT_BINARY_DIR@/pack/Linux/RPM

%description
IoT - IoTAgent
%install
pwd
mkdir -p %{buildroot}/usr/local/iot/bin
cp @CMAKE_CURRENT_SOURCE_DIR@/bin/@CMAKE_BUILD_TYPE@/iotagent  %{buildroot}/usr/local/iot/bin

mkdir -p %{buildroot}/usr/local/iot/lib
cp @CMAKE_CURRENT_SOURCE_DIR@/lib/@CMAKE_BUILD_TYPE@/libiota.so %{buildroot}/usr/local/iot/lib
cp @INSTALL_PION@ %{buildroot}/usr/local/iot/lib
cp @INSTALL_LOG4CPLUS@ %{buildroot}/usr/local/iot/lib
cp @INSTALL_MONGOCLIENT@ %{buildroot}/usr/local/iot/lib
@INSTALL_BOOST@

mkdir -p %{buildroot}/etc/iot
cp @CMAKE_CURRENT_SOURCE_DIR@/src/services/date_time_zonespec.csv %{buildroot}/etc/iot
cp @CMAKE_CURRENT_SOURCE_DIR@/tests/iotagent/devices.json %{buildroot}/etc/iot

%clean
rm -rf %{buildroot}
%pre
%post
%preun
%files
/usr/local/iot/bin/*
/usr/local/iot/lib/*
/etc/iot/*
